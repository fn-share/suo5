(function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,b.markdownItAttrs=a()}})(function(){return function(){function b(d,e,g){function a(j,i){if(!e[j]){if(!d[j]){var f="function"==typeof require&&require;if(!i&&f)return f(j,!0);if(h)return h(j,!0);var c=new Error("Cannot find module '"+j+"'");throw c.code="MODULE_NOT_FOUND",c}var k=e[j]={exports:{}};d[j][0].call(k.exports,function(b){var c=d[j][1][b];return a(c||b)},k,k.exports,b,d,e,g)}return e[j].exports}for(var h="function"==typeof require&&require,c=0;c<g.length;c++)a(g[c]);return a}return b}()({1:[function(a,b){'use strict';function c(a){"@babel/helpers - typeof";return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},c(a)}function d(a,b,i){var k={match:!1,j:null},l=void 0===i.shift?i.position:b+i.shift;if(void 0!==i.shift&&0>l)return k;var m=g(a,l);if(void 0===m)return k;for(var n,o=function(){var a=j[p];if("shift"===a||"position"===a)return"continue";if(void 0===m[a])return{v:k};if("children"===a&&e(i.children)){var b=function(){if(0===m.children.length)return{v:{v:k}};var a,b=i.children,c=m.children;if(!b.every(function(a){return void 0!==a.position}))for(var e,f=function(e){if(a=b.every(function(a){return d(c,e,a).match}),a)return k.j=e,"break"},g=0;g<c.length&&(e=f(g),"break"!==e);g++);else if(a=b.every(function(a){return d(c,a.position,a).match}),a){var l=h(b).position;k.j=0<=l?l:c.length+l}return!1===a?{v:{v:k}}:{v:"continue"}}();if("object"===c(b))return b.v}switch(c(i[a])){case"boolean":case"number":case"string":if(m[a]!==i[a])return{v:k};break;case"function":if(!i[a](m[a]))return{v:k};break;case"object":if(f(i[a])){var g=i[a].every(function(b){return b(m[a])});if(!1===g)return{v:k};break}default:throw new Error("Unknown type of pattern test (key: ".concat(a,"). Test should be of type boolean, number, string, function or array of functions."));}},p=0,j=Object.keys(i);p<j.length;p++)if(n=o(),"continue"!==n&&"object"===c(n))return n.v;return k.match=!0,k}function e(a){return Array.isArray(a)&&a.length&&a.every(function(a){return"object"===c(a)})}function f(a){return Array.isArray(a)&&a.length&&a.every(function(a){return"function"==typeof a})}function g(a,b){return 0<=b?a[b]:a[a.length+b]}function h(a){return a.slice(-1)[0]||{}}var i=a("./patterns.js"),j={leftDelimiter:"{",rightDelimiter:"}",allowedAttributes:[]};b.exports=function(a,b){var c=Object.assign({},j);c=Object.assign(c,b);var e=i(c);a.core.ruler.before("linkify","curly_attributes",function(a){for(var b=a.tokens,c=function(a){for(var c=0;c<e.length;c++){var f=e[c],g=null,h=f.tests.every(function(c){var e=d(b,a,c);return null!==e.j&&(g=e.j),e.match});h&&(f.transform(b,a,g),("inline attributes"===f.name||"inline nesting 0"===f.name)&&c--)}},f=0;f<b.length;f++)c(f)})}},{"./patterns.js":2}],2:[function(a,b){'use strict';function c(a){return a.slice(-1)[0]}var d=a("./utils.js");b.exports=function(a){var b=new RegExp("^ {0,3}[-*_]{3,} ?"+d.escapeRegExp(a.leftDelimiter)+"[^"+d.escapeRegExp(a.rightDelimiter)+"]");return[{name:"fenced code blocks",tests:[{shift:0,block:!0,info:d.hasDelimiters("end",a)}],transform:function(b,c){var e=b[c],f=e.info.lastIndexOf(a.leftDelimiter),g=d.getAttrs(e.info,f,a);d.addAttrs(g,e),e.info=d.removeDelimiter(e.info,a)}},{name:"inline nesting 0",tests:[{shift:0,type:"inline",children:[{shift:-1,type:function(a){return"image"===a||"code_inline"===a}},{shift:0,type:"text",content:d.hasDelimiters("start",a)}]}],transform:function(b,c,e){var f=b[c].children[e],g=f.content.indexOf(a.rightDelimiter),h=b[c].children[e-1],i=d.getAttrs(f.content,0,a);d.addAttrs(i,h),f.content.length===g+a.rightDelimiter.length?b[c].children.splice(e,1):f.content=f.content.slice(g+a.rightDelimiter.length)}},{name:"tables",tests:[{shift:0,type:"table_close"},{shift:1,type:"paragraph_open"},{shift:2,type:"inline",content:d.hasDelimiters("only",a)}],transform:function(b,c){var e=b[c+2],f=d.getMatchingOpeningToken(b,c),g=d.getAttrs(e.content,0,a);d.addAttrs(g,f),b.splice(c+1,3)}},{name:"inline attributes",tests:[{shift:0,type:"inline",children:[{shift:-1,nesting:-1},{shift:0,type:"text",content:d.hasDelimiters("start",a)}]}],transform:function(b,c,e){var f=b[c].children[e],g=f.content,h=d.getAttrs(g,0,a),i=d.getMatchingOpeningToken(b[c].children,e-1);d.addAttrs(h,i),f.content=g.slice(g.indexOf(a.rightDelimiter)+a.rightDelimiter.length)}},{name:"list softbreak",tests:[{shift:-2,type:"list_item_open"},{shift:0,type:"inline",children:[{position:-2,type:"softbreak"},{position:-1,type:"text",content:d.hasDelimiters("only",a)}]}],transform:function(b,c,e){for(var f=b[c].children[e],g=f.content,h=d.getAttrs(g,0,a),i=c-2;b[i-1]&&"ordered_list_open"!==b[i-1].type&&"bullet_list_open"!==b[i-1].type;)i--;d.addAttrs(h,b[i-1]),b[c].children=b[c].children.slice(0,-2)}},{name:"list double softbreak",tests:[{shift:0,type:function(a){return"bullet_list_close"===a||"ordered_list_close"===a}},{shift:1,type:"paragraph_open"},{shift:2,type:"inline",content:d.hasDelimiters("only",a),children:function(a){return 1===a.length}},{shift:3,type:"paragraph_close"}],transform:function(b,c){var e=b[c+2],f=e.content,g=d.getAttrs(f,0,a),h=d.getMatchingOpeningToken(b,c);d.addAttrs(g,h),b.splice(c+1,3)}},{name:"list item end",tests:[{shift:-2,type:"list_item_open"},{shift:0,type:"inline",children:[{position:-1,type:"text",content:d.hasDelimiters("end",a)}]}],transform:function(b,e,f){var g=b[e].children[f],h=g.content,i=d.getAttrs(h,h.lastIndexOf(a.leftDelimiter),a);d.addAttrs(i,b[e-2]);var j=h.slice(0,h.lastIndexOf(a.leftDelimiter));g.content=" "===c(j)?j.slice(0,-1):j}},{name:"\n{.a} softbreak then curly in start",tests:[{shift:0,type:"inline",children:[{position:-2,type:"softbreak"},{position:-1,type:"text",content:d.hasDelimiters("only",a)}]}],transform:function(b,c,e){for(var f=b[c].children[e],g=d.getAttrs(f.content,0,a),h=c+1;b[h+1]&&-1===b[h+1].nesting;)h++;var i=d.getMatchingOpeningToken(b,h);d.addAttrs(g,i),b[c].children=b[c].children.slice(0,-2)}},{name:"horizontal rule",tests:[{shift:0,type:"paragraph_open"},{shift:1,type:"inline",children:function(a){return 1===a.length},content:function(a){return null!==a.match(b)}},{shift:2,type:"paragraph_close"}],transform:function(b,c){var e=b[c];e.type="hr",e.tag="hr",e.nesting=0;var f=b[c+1].content,g=f.lastIndexOf(a.leftDelimiter),h=d.getAttrs(f,g,a);d.addAttrs(h,e),e.markup=f,b.splice(c+1,2)}},{name:"end of block",tests:[{shift:0,type:"inline",children:[{position:-1,content:d.hasDelimiters("end",a),type:function(a){return"code_inline"!==a&&"math_inline"!==a}}]}],transform:function(b,e,f){for(var g=b[e].children[f],h=g.content,i=d.getAttrs(h,h.lastIndexOf(a.leftDelimiter),a),j=e+1;b[j+1]&&-1===b[j+1].nesting;)j++;var k=d.getMatchingOpeningToken(b,j);d.addAttrs(i,k);var l=h.slice(0,h.lastIndexOf(a.leftDelimiter));g.content=" "===c(l)?l.slice(0,-1):l}}]}},{"./utils.js":3}],3:[function(a,b,c){"use strict";function d(a){return a.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function e(a){return f[a]}c.getAttrs=function(a,b,c){for(var d=".",e=[],f="",g="",h=!0,j=!1,k=b+c.leftDelimiter.length;k<a.length;k++){if(a.slice(k,k+c.rightDelimiter.length)===c.rightDelimiter){""!==f&&e.push([f,g]);break}var l=a.charAt(k);if(l==="="&&h){h=!1;continue}if(l===d&&""===f){a.charAt(k+1)===d?(f="css-module",k+=1):f="class",h=!1;continue}if(l==="#"&&""===f){f="id",h=!1;continue}if("\""===l&&""===g){j=!0;continue}if("\""===l&&j){j=!1;continue}if(l===" "&&!j){if(""===f)continue;e.push([f,g]),f="",g="",h=!0;continue}if(!(h&&-1===l.search(/[^\t\n\f />"'=]/))){if(h){f+=l;continue}g+=l}}if(c.allowedAttributes&&c.allowedAttributes.length){var m=c.allowedAttributes;return e.filter(function(a){var b=a[0];return m.some(function(a){return b===a||a instanceof RegExp&&a.test(b)})})}return e},c.addAttrs=function(a,b){for(var c,d=0,e=a.length;d<e;++d)c=a[d][0],"class"===c?b.attrJoin("class",a[d][1]):"css-module"===c?b.attrJoin("css-module",a[d][1]):b.attrPush(a[d]);return b},c.hasDelimiters=function(a,b){if(!a)throw new Error("Parameter `where` not passed. Should be \"start\", \"end\" or \"only\".");return function(c){var d=b.leftDelimiter.length+1+b.rightDelimiter.length;if(!c||"string"!=typeof c||c.length<d)return!1;var e,f,g,h,i=d-b.rightDelimiter.length;switch(a){case"start":g=c.slice(0,b.leftDelimiter.length),e=g===b.leftDelimiter?0:-1,f=-1===e?-1:c.indexOf(b.rightDelimiter,i),h=c.charAt(f+b.rightDelimiter.length),h&&-1!==b.rightDelimiter.indexOf(h)&&(f=-1);break;case"end":e=c.lastIndexOf(b.leftDelimiter),f=-1===e?-1:c.indexOf(b.rightDelimiter,e+i),f=f===c.length-b.rightDelimiter.length?f:-1;break;case"only":g=c.slice(0,b.leftDelimiter.length),e=g===b.leftDelimiter?0:-1,g=c.slice(c.length-b.rightDelimiter.length),f=g===b.rightDelimiter?c.length-b.rightDelimiter.length:-1;break;default:throw new Error("Unexpected case ".concat(a,", expected 'start', 'end' or 'only'"));}return-1!==e&&-1!==f&&function(a){var c="."===a.charAt(b.leftDelimiter.length),e="#"===a.charAt(b.leftDelimiter.length);return c||e?a.length>=d+1:a.length>=d}(c.substring(e,f+b.rightDelimiter.length))}},c.removeDelimiter=function(a,b){var c=d(b.leftDelimiter),e=d(b.rightDelimiter),f=new RegExp("[ \\n]?"+c+"[^"+c+e+"]+"+e+"$"),g=a.search(f);return-1===g?a:a.slice(0,g)},c.escapeRegExp=d,c.getMatchingOpeningToken=function(a,b){if("softbreak"===a[b].type)return!1;if(0===a[b].nesting)return a[b];for(var c=a[b].level,d=a[b].type.replace("_close","_open");0<=b;--b)if(a[b].type===d&&a[b].level===c)return a[b];return!1};var f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};c.escapeHtml=function(a){return /[&<>"]/.test(a)?a.replace(/[&<>"]/g,e):a}},{}]},{},[1])(1)});